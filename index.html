<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>WOFF Hello World</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px;font-size:1.2em; }
  </style>
  <script charset="utf-8" src="https://static.worksmobile.net/static/wm/woff/edge/3.7.1/sdk.js"></script>
</head>
<body>
  <h1>Hello World from WOFF!</h1>
  <div id="assetList">載入中...</div>

<script>
woff.getProfile().then(profile => {
                        const profileInfoElem = document.getElementById("assetList");
                        profileInfoElem.innerHTML = `
                    ドメイン ID: ${profile.domainId} <br>
                    ユーザー ID: ${profile.userId} <br>
                    ユーザー名: ${profile.displayName}
                `;
                    }).catch(error => {
                        console.error('Profile error:', error);
                    });
</script>

  <script>
    
woff.getUserInfo()
    .then(user => {
      console.log(user); // 檢查完整資訊
      const userName = user.displayName; // 使用者顯示名稱
      // document.getElementById('userName').textContent = `您好，${userName}`;
    
  fetch('https://keeperlist-468585210906.asia-east1.run.app', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ user_name: { value: userName } })
  })
  .then(res => res.json())
  .then(data => {
    
  // 取出 records
  const records = data.records;
  
  // 轉換成簡單陣列
  const assets = records.map(record => {
    return {
      資產號碼組合: record["資產號碼組合"].value,
      製品名: record["製品名"].value,
      存放地點: record["存放地點"].value
    };
  });
console.log(assets)

// 顯示成表格
  const html = `
    <table border="1" style="width:100%; text-align:left;">
      <tr><th>資產號碼</th><th>製品名</th><th>存放地點</th></tr>
      ${assets.map(item => `
        <tr>
          <td>${item.資產號碼組合}</td>
          <td>${item.製品名}</td>
          <td>${item.存放地點}</td>
        </tr>
      `).join('')}
    </table>
  `;
  document.getElementById('assetList').innerHTML = html;
})
})
  .catch(err => console.error(err));

</script>

</body>



</html>





















